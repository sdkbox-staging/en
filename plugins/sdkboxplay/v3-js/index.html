<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">

	<title>Play with Javascript - SDKBOX</title>

        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../../css/base.css?2" rel="stylesheet">
        <link rel="stylesheet" href="../../../css/highlight.css">
        <link href="../../../css/custom.css" rel="stylesheet">


        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="http://sdkbox.com"><img src="http://www.cocos2d-x.org/s/sdkbox/SDKBOX_logo.png">Docs</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">

            <ul class="nav navbar-nav navbar-right">


            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../../..">Overview</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Cocos <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../cocos/">Cocos Integration</a>
</li>

                        
                            
<li >
    <a href="../../../installer/">Installer</a>
</li>

                        
                            
  
  <li class="dropdown-submenu">
    <a tabindex="-1" class="non-link">Plugins</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../achievement/">Achievements</a>
</li>

        
            
  

        
            
<li >
    <a href="../../adcolony/">AdColony</a>
</li>

        
            
  

        
            
<li >
    <a href="../../admob/">AdMob</a>
</li>

        
            
  

        
            
<li >
    <a href="../../agecheq/">AgeCheq</a>
</li>

        
            
  

        
            
<li >
    <a href="../../appnext/">Appnext</a>
</li>

        
            
  

        
            
<li >
    <a href="../../appodeal/">Appodeal</a>
</li>

        
            
  

        
            
<li >
    <a href="../../amazon/">Amazon</a>
</li>

        
            
  

        
            
<li >
    <a href="../../apteligent/">Apteligent</a>
</li>

        
            
  

        
            
<li >
    <a href="../../bee7/">Bee7</a>
</li>

        
            
  

        
            
<li >
    <a href="../../chartboost/">Chartboost</a>
</li>

        
            
  

        
            
<li >
    <a href="../../facebook/">Facebook</a>
</li>

        
            
  

        
            
<li >
    <a href="../../flurryanalytics/">Flurry Analytics</a>
</li>

        
            
  

        
            
<li >
    <a href="../../fyber/">Fyber</a>
</li>

        
            
  

        
            
<li >
    <a href="../../googleanalytics/">Google Analytics</a>
</li>

        
            
  

        
            
<li >
    <a href="../../iap/">In-App Purchase</a>
</li>

        
            
  

        
            
<li >
    <a href="../../inmobi/">InMobi</a>
</li>

        
            
  

        
            
<li >
    <a href="../../kochava/">Kochava</a>
</li>

        
            
  

        
            
<li >
    <a href="../../leadbolt/">LeadBolt</a>
</li>

        
            
  

        
            
<li >
    <a href="../../leaderboard/">Leaderboard</a>
</li>

        
            
  

        
            
<li >
    <a href="../../onesignal/">OneSignal</a>
</li>

        
            
  

        
            
<li >
    <a href="../../playphone/">Playphone</a>
</li>

        
            
  

        
            
<li >
    <a href="../../review/">Ratings & Reviews</a>
</li>

        
            
  

        
            
<li >
    <a href="../../sdkboxads/">SDKBOX Ads</a>
</li>

        
            
  

        
            
<li >
    <a href="../">SDKBOX Play</a>
</li>

        
            
  

        
            
<li >
    <a href="../../share/">Social Sharing</a>
</li>

        
            
  

        
            
<li >
    <a href="../../tune/">Tune</a>
</li>

        
            
  

        
            
<li >
    <a href="../../valuepotion/">Valuepotion</a>
</li>

        
            
  

        
            
<li >
    <a href="../../vungle/">Vungle</a>
</li>

        
            
  

        
            
<li >
    <a href="../../youtube/">Youtube</a>
</li>

        
            
  

        
    </ul>
  </li>
  

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Unity <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../unity/iap/">In-App Purchase</a>
</li>

                        
                            
<li >
    <a href="../../../unity/review/">Ratings & Reviews</a>
</li>

                        
                            
<li >
    <a href="../../../unity/socialshare/">SocialShare</a>
</li>

                        
                            
<li >
    <a href="../../../unity/googleanalytics/documentation/">Google Analytics</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Unreal <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../unreal/iap/">In-App Purchase</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">LiveOps <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../liveops/">Setup</a>
</li>

                        
                            
<li >
    <a href="../../../liveops/remote-config/">Remote Configuration</a>
</li>

                        
                            
<li >
    <a href="../../../liveops/receipt-verification/">Server-side IAP receipt verification</a>
</li>

                        
                            
<li >
    <a href="../../../liveops/catalog-management/">On-the-fly catalog management</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../../release-note/">About</a>
                    </li>
                
                

                <li style="margin-left:30px">
                    <a href="http://sdkbox-doc.github.io/zh/">中文</a>
                </li>
                
                </ul>
            




            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#prerequisites">Prerequisites</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#google-play">Google play</a></li>
        
            <li><a href="#game-center">Game Center</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#integration">Integration</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#json-configuration">JSON Configuration</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#usage">Usage</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#register-javascript-functions">Register Javascript Functions</a></li>
        
            <li><a href="#initialize-sdkboxplay">Initialize SdkboxPlay</a></li>
        
            <li><a href="#using-sdkboxplay">Using SdkboxPlay</a></li>
        
            <li><a href="#sdkboxads-events">SdkboxAds events</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#api-reference">API Reference</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#methods">Methods</a></li>
        
            <li><a href="#listeners">Listeners</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#manual-integration">Manual Integration</a></li>
	
    
        <li class="main "><a href="#manual-integration-for-ios">Manual Integration For iOS</a></li>
	
    
        <li class="main "><a href="#manual-integration-for-android">Manual Integration For Android</a></li>
	
	<ul class="sub-sidenav">
        
            <li><a href="#copy-files">Copy Files</a></li>
        
            <li><a href="#edit-androidmanifestxml">Edit AndroidManifest.xml</a></li>
        
            <li><a href="#edit-androidmk">Edit Android.mk</a></li>
        
            <li><a href="#edit-aplicationmk">Edit Aplication.mk</a></li>
        
            <li><a href="#modify-cocos2dxactivityjava">Modify Cocos2dxActivity.java</a></li>
        
	</ul>
	
    
        <li class="main "><a href="#proguard-optional">Proguard (optional)</a></li>
	
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<p><a href="../">&#8249; SdkboxAds Doc Home</a></p>
<h1>SdkboxPlay Integration Guide</h1>

<h4><em><b>For the Javascript version of cocos2d-x v3.x</b> - (<a href="./../">all other versions</a>)</em></h4>

<h2 id="prerequisites">Prerequisites</h2>
<h3 id="google-play">Google play</h3>
<ul>
<li>Follow <a href="https://developers.google.com/games/services/console/enabling#step_2_add_your_game_to_the_dev_console">this instructions</a> to enable game services for your game and create a linked application. Otherwise, the app won’t be able to make connections to google play. </li>
<li>Use developer console to configure leaderboards and achievements.</li>
</ul>
<h3 id="game-center">Game Center</h3>
<ul>
<li>Enable Game Center on XCode.</li>
<li>Use developer console to configure leaderboards and achievements.</li>
</ul>
<h2 id="integration">Integration</h2>
<p>Open a terminal and use the following command to install the SDKBOX SdkboxPlay plugin. Make sure you setup the SDKBOX installer correctly.</p>
<pre><code class="bash">$ sdkbox import sdkboxplay
</code></pre>

<!--## Configuration

## Remote Configuration

Optionally, you can choose to use SDKBOX LiveOps to remotely update this plugin's configuration. [Learn more](/liveops/remote-config)-->

<h3 id="json-configuration">JSON Configuration</h3>
<p>SDKBOX Installer will automatically create a sample configuration <code>sdkbox_config.json</code> for you</p>
<p>Here is an example of the SdkboxAds configuration:</p>
<pre><code class="json">    &quot;sdkboxplay&quot; : {
      &quot;leaderboards&quot; : [
        {
          &quot;id&quot; : &quot;CgkI0sux8sMWEAIQAA&quot;,
          &quot;name&quot; : &quot;ldb1&quot;
        }
      ],
      &quot;achievements&quot; : [
        {
          &quot;id&quot; : &quot;CgkI0sux8sMWEAIQAg&quot;,
          &quot;name&quot; : &quot;ten-games&quot;,
          &quot;incremental&quot; : false
        },
        {
          &quot;id&quot; : &quot;CgkI0sux8sMWEAIQAw&quot;,
          &quot;name&quot; : &quot;hunter&quot;,
          &quot;incremental&quot; : false
        },
        ...
      ],
      &quot;debug&quot; : true,
      &quot;connect_on_start&quot; : false
    }

</code></pre>

<p>As it can be seen, leaderboards and achievements have a human readable name, and a machine generated id. This is on purpose so that the same API can be used between platforms. While Google play generated random ids like the ones shown, iOS Game Center will be more human friendly. 
In either case, the developer will reference leaderboards and achievements by a name of his choice, like in the example shown.</p>
<!---->

<h2 id="usage">Usage</h2>
<h3 id="register-javascript-functions">Register Javascript Functions</h3>
<p>You need to register all the SdkboxPlay JS functions with cocos2d-x before using them.</p>
<p>To do this:
* Modify <code>./frameworks/runtime-src/Classes/AppDelegate.cpp</code> to include the following headers:</p>
<pre><code class="cpp">#include &quot;PluginSdkboxPlayJS.hpp&quot;
#include &quot;PluginSdkboxPlayJSHelper.h&quot;
</code></pre>

<ul>
<li>Modify <code>./frameworks/runtime-src/Classes/AppDelegate.cpp</code> make sure to call:</li>
</ul>
<pre><code class="cpp">sc-&gt;addRegisterCallback(register_all_PluginSdkboxPlayJS);
sc-&gt;addRegisterCallback(register_all_PluginSdkboxPlayJS_helper);
</code></pre>

<h3 id="initialize-sdkboxplay">Initialize SdkboxPlay</h3>
<p>Initialize the plugin by calling <code>init()</code> where appropriate in your code. We
recommend to do this in the <code>app.js</code>. Example:</p>
<pre><code class="javascript">     sdkbox.PluginSdkboxPlay.init();
}
</code></pre>

<h3 id="using-sdkboxplay">Using SdkboxPlay</h3>
<h4 id="intro">Intro</h4>
<p>SdkboxPlay is an abstraction for Google Play and Game Center’s social services. Under a common API exposes access to Leaderboards and Achievements for each platform.
In order to keep the API fit to the two models, some tradeoffs have been made, which will be detailed in each section</p>
<h5 id="achievements">Achievements</h5>
<p>Achievements are defined on the respective platform’s developer console.
There are differences in concept between GooglePlay and GameCenter’s achievements:
+ Google Play differentiates between achievements, and incremental achievements. Google keeps track of incremental achievements progress. Achievements are achieved only once.
+ For Game Center, all achievements are incremental, but Game center does not keep track of its progress. Achievements are expected to be achieved during a game session. Achievements can be set to be unlocked several times.
+ Google Play has the notion of newly unlocked achievement (first time unlocked), and Game Center has the notion of recurrently unlockable achievement. Both concepts are complementary.</p>
<p>To keep things consisten, SdkboxPlay API:</p>
<ul>
<li>Allows you to define non-incremental achievements. For ios, are submitted with an incremental value of 100, which means it will be unlocked.</li>
<li>Allows you to define Incremental achievements. In Google play, incremental achievements have defined their unlocking value on the application console. </li>
<li>For consistency, it is recommended to define Google Play’s achievements with a count of 100. This is the value Game Center expects to be reached to unlock an achievement.</li>
</ul>
<h5 id="leaderboards">Leaderboards</h5>
<p>Leaderboards are defined on the respective platform’s developer console.
To keep things simple, the current SdkboxPlay implementation does not allow to define group leaderboards from iOS. For both platforms, an arbitrary number of leaderboards can be defined.
Though both, GooglePlay and GameCenter define leaderboards in the same way, in the runtime there are some differences:</p>
<ul>
<li>Google Play creates automatically 3 time frames for each leaderboard: daily, weekly and all time best scores.</li>
<li>Game Center creates just one timeframe.</li>
</ul>
<p>This will be resembled on the observer methods for leaderboard operations as described below.</p>
<h4 id="usage_1">Usage</h4>
<p>A call to <code>sdkbox.SdkboxPlay.init()</code> will configure the plugin with the selected leaderboards and achievements present in the sdkbox_config.json file.</p>
<p>First, a connection to the games services must be done by calling:</p>
<pre><code class="js">sdkbox.PluginSdkboxPlay.signin();
</code></pre>

<p>If connection is successful, you'll be able to use the SdkboxPlay services with the following API:</p>
<h5 id="leaderboards_1">Leaderboards</h5>
<pre><code class="js">sdkbox.PluginSdkboxPlay.submitScore( leaderboard_name, score )
</code></pre>

<p>This method submits a update request to the given leaderboard. The leaderboard name must match any of the leaderboard names defined in the configuration block.
If a request is sent to a non existent leaderboard, nothing will happen.
Whether to store the new score or not, can be defined in the developer’s console (store always latest score, only maximum, etc.)
This method will invoke plugin’s observer method: </p>
<pre><code class="js">sdkbox.PluginSdkboxPlay.onScoreSubmitted(
        leaderboard_name, 
        score, 
        maxScoreAllTime, 
        maxScoreWeek, 
        maxScoreToday )
</code></pre>

<p>For iOS, this method will have the three boolean flags as false.</p>
<pre><code class="js">sdkbox.PluginSdkboxPlay.showLeaderboard( leaderboard_name );
</code></pre>

<p>Request to show the leaderboard information. This will invoke a platform specific UI.
For iOS, there’s no different UI for requesting leaderboards and achievements, so this method will invoke the UI with the leaderboards view enabled.</p>
<h5 id="achievements_1">Achievements</h5>
<pre><code class="js">sdkbox.PluginSdkboxPlay.unlockAchievement( achievement_name );
</code></pre>

<p>Unlock a non incremental achievement. In the case of iOS, it will send a request to Game Center of unlock with 100 progress points.
If the achievement type is incorrectly defined in the configuration file (wrong id), or the play services determines it is of the wrong type (Google play) the method will fail silently.
Upon successful call, this method will invoke the listener’s method: onAchievementUnlocked( const std::string&amp; achievement_name, bool newlyUnlocked ).</p>
<pre><code class="js">sdkbox.PluginSdkboxPlay.incrementAchievement( achievement_name, increment );
</code></pre>

<p>Increment an incremental achievement.
The method will silently fail if the achievement type is incorrectly defined in the configuration file (wrong or non existent id), or the play services determines it is of the wrong type (Google Play).
If the call is successful, this method may invoke two different methods:
+ <code>onIncrementalAchievementStep( achievement_name, step )</code> if the achievement is not unlocked.
+ <code>onIncrementalAchievementUnlocked( achievement_name, newlyUnlocked )</code> the first time it's been unlocked.</p>
<pre><code class="js">sdkbox.PluginSdkboxPlay.showAchievements( );
</code></pre>

<p>Request to show the default Achievements view. This view only shows public achievements.
t will show specific per platform information, like whether it’s been unlocked, remaining unlocking steps (Google Play only), total experience count, etc.</p>
<h3 id="sdkboxads-events">SdkboxAds events</h3>
<p>This allows you to catch <code>SdkboxPlay</code> events.</p>
<pre><code class="javascript">sdkbox.PluginSdkboxPlay.setListener({
    /**
     * Call method invoked when the Plugin connection changes its status.
     * Values are as follows:
     *   + GPS_CONNECTED:       successfully connected.
     *   + GPS_DISCONNECTED:    successfully disconnected.
     *   + GPS_CONNECTION_ERROR:error with google play services connection.
     */
    onConnectionStatusChanged : function( status ) {},

    /**
     * Callback method invoked when an score has been successfully submitted to a leaderboard.
     * It notifies back with the leaderboard_name (not id, see the sdkbox_config.json file) and the
     * subbmited score, as well as whether the score is the daily, weekly, or all time best score.
     * Since Game center can't determine if submitted score is maximum, it will send the max score flags as false.
     */
    onScoreSubmitted : function( leaderboard_name, score, is_maxScoreAllTime, is_maxScoreWeek, is_maxScoreToday ) {},

    /**
     * Callback method invoked when the request call to increment an achievement is succeessful and
     * that achievement gets unlocked. This happens when the incremental step count reaches its maximum value. 
     * Maximum step count for an incremental achievement is defined in the google play developer console.
     */
    onIncrementalAchievementUnlocked : function( achievement_name ) {},

    /**
     * Callback method invoked when the request call to increment an achievement is successful.
     * If possible (Google play only) it notifies back with the current achievement step count.
     */
    onIncrementalAchievementStep : function( achievement_name, step ) {},

    /**
     * Call method invoked when the request call to unlock a non-incremental achievement is successful.
     * If this is the first time the achievement is unlocked, newUnlocked will be true.
     */
    onAchievementUnlocked : function( achievement_name, newlyUnlocked ) {}
});
</code></pre>

<blockquote>
<p>refer to the cpp documentation for action_type values.</p>
</blockquote>
<h2 id="api-reference">API Reference</h2>
<h3 id="methods">Methods</h3>
<pre><code class="js">sdkbox.SdkboxPlay.init ( ) ;
</code></pre>

<blockquote>
<p>Initialize the plugin instance.
The plugin initializes from the sdkbox_config.json file, and reads a configuration of the form:
{
    "leaderboards"     : LeaderboardObject[],
    "achievements"     : AchievementObject[],
    "connect_on_start" : boolean,
    "debug"            : boolean,
    "enabled"          : boolean
}
debug: 
   is a common value to all plugins which enables debug info to be sent to the console. Useful when developing.
enabled: 
   is a common value to all plugins, which enables or disables the plugin. If enabled is false, the plugin methods &gt; will do nothing.
connect_on_start: 
   tells the plugin to make an automatic connection to Google Play Services on application startup.
leaderboards:
   a collection of objects of the form:
   {
       "id"   : // google play's assigned leaderboard id
       "name" : // human readable leaderboard name. You'll request leaderboard actions with this name.
   }
achievements:
   a collection of objects of the form:
   {
       "id"          : // google play's assigned achievement id.
       "name"        : // human readable achievement name. You'll request achievement actions with this name.
       "incremental" : // boolean
   }</p>
</blockquote>
<pre><code class="js">sdkbox.SdkboxPlay.setListener ( listener ) ;
</code></pre>

<blockquote>
<p>Set SdkboxPlay plugin listener.</p>
</blockquote>
<pre><code class="js">sdkbox.SdkboxPlay.submitScore( leaderboard_name, score );
</code></pre>

<blockquote>
<p>Request submission of an score value to a leaderboard name defined in sdkbox_config.json file.
If the leaderboard name does not exists, or the id associated is not defined in the Developer Console for the application, the call will silently fail.
If everything's right, it will notify the method <code>onScoreSubmitted</code>.</p>
</blockquote>
<pre><code class="js">sdkbox.SdkboxPlay.showLeaderboard( leaderboard_name );
</code></pre>

<blockquote>
<p>Request to show the default Leaderboard view.
In this view you'll be able to interactively select between daily, weekly or all-time leaderboard time frames and the scope to global or you google play's friends results.</p>
</blockquote>
<pre><code class="js">sdkbox.SdkboxPlay.unlockAchievement( achievement_name );
</code></pre>

<blockquote>
<p>Request to unlock an achievement defined by its name.
This method assumes the achievement is non incremental.
If the achievement type is incorrectly defined in the configuration file, or the play services determines it is of the wrong type, this method will fail silently.
Otherwise, if everything is right, the method <code>onAchievementUnlocked</code> will be invoked on the plugin listener.</p>
</blockquote>
<pre><code class="js">sdkbox.SdkboxPlay.incrementAchievement( achievement_name, increment );
</code></pre>

<blockquote>
<p>Request to increment the step count of an incremental achievement by the specified number of steps.
This method assumes the achievement is incremental.
If the achievement type is incorrectly defined in the configuration file, or the play services determines it is of the wrong type, this method will fail silently.
If the call is successful, this method may invoke two different methods:
 + <code>onIncrementalAchievementStep</code> if the achievement is not unlocked.
 + <code>onIncrementalAchievementUnlocked</code> the first time it's been newly unlocked.</p>
</blockquote>
<pre><code class="js">sdkbox.SdkboxPlay.showAchievements( );
</code></pre>

<blockquote>
<p>Request to show the default Achievements view.
In this view, you'll only see public achievements.
It will show wether or not achievements are unlocked, and the steps towards unlocking it for incremental achievements.
Total experience count is measured as well.</p>
</blockquote>
<pre><code class="js">sdkbox.SdkboxPlay.isConnected();
</code></pre>

<blockquote>
<p>Fast method to know plugin's connection status to the play services.</p>
</blockquote>
<pre><code class="js">sdkbox.SdkboxPlay.signin();
</code></pre>

<blockquote>
<p>Request connection to the platform-specific services backend.
This method will invoke plugin's listener <code>onConnectionStatusChanged</code> method.   </p>
</blockquote>
<pre><code class="js">sdkbox.SdkboxPlay.signout();
</code></pre>

<blockquote>
<p>Request disconnection from the GooglePlay/Game Center backend.
This method will invoke plugin's listener <code>onConnectionStatusChanged</code> method.</p>
</blockquote>
<h3 id="listeners">Listeners</h3>
<pre><code class="js">onConnectionStatusChanged( status );
</code></pre>

<blockquote>
<p>Call method invoked when the Plugin connection changes its status.
Values are as follows:
  + 1000:     successfully connected.
  + 1001:     successfully disconnected.
  + 1002:     error with google play services connection.</p>
</blockquote>
<pre><code class="js">onScoreSubmitted( 
        leaderboard_name, 
        score, 
        maxScoreAllTime, 
        maxScoreWeek, 
        maxScoreToday )
</code></pre>

<blockquote>
<p>Callback method invoked when an score has been successfully submitted to a leaderboard.
It notifies back with the leaderboard_name (not id, see the sdkbox_config.json file) and the
subbmited score, as well as whether the score is the daily, weekly, or all time best score.
Since Game center can't determine if submitted score is maximum, it will send the max score flags as false.</p>
</blockquote>
<pre><code class="js">onIncrementalAchievementUnlocked( achievement_name );
</code></pre>

<blockquote>
<p>Callback method invoked when the request call to increment an achievement is succeessful and that achievement gets unlocked. This happens when the incremental step count reaches its maximum value. 
Maximum step count for an incremental achievement is defined in the google play developer console.</p>
</blockquote>
<pre><code class="js">onIncrementalAchievementStep( achievement_name, step );
</code></pre>

<blockquote>
<p>Callback method invoked when the request call to increment an achievement is successful.
If possible (Google play only) it notifies back with the current achievement step count.</p>
</blockquote>
<pre><code class="js">onAchievementUnlocked( achievement_name, newlyUnlocked );
</code></pre>

<blockquote>
<p>Call method invoked when the request call to unlock a non-incremental achievement is successful.
If this is the first time the achievement is unlocked, newUnlocked will be true.</p>
</blockquote>
<h2 id="manual-integration">Manual Integration</h2>
<p>If the <em>SDKBOX Installer</em> <strong>fails</strong> to complete successfully, it is possible to integrate SDKBOX manually. If the installer complete successfully, please <strong>do not</strong> complete anymore of this document. It is not necessary.</p>
<p>These steps are listed last in this document on purpose as they are seldom needed. If you find yourself using these steps, please, after completing, double back and re-read the steps above for other integration items.</p>
<h2 id="manual-integration-for-ios">Manual Integration For iOS</h2>
<p>Drag and drop the following frameworks from the <strong>plugins/ios</strong> folder of
the <code>SdkboxPlay</code> bundle into your Xcode project, check <code>Copy items if needed</code> when adding frameworks:</p>
<blockquote>
<p>sdkbox.framework</p>
<p>PluginSdkboxPlay.framework</p>
</blockquote>
<p>The above frameworks depend upon a large number of other frameworks. You also need to add the following system frameworks, if you don't already have them:</p>
<blockquote>
<p>GameKit.framework</p>
<p>UIKit.framework</p>
</blockquote>
<p>Copy all source and header files from <code>plugin/jsbindings/</code> to your projects <code>Classes</code> folder.</p>
<p>Add these same files, that you just copied, to Xcode by either dragging and dropping them into Xcode or by using <strong>File -&gt; Add files to...</strong>.</p>
<h2 id="manual-integration-for-android">Manual Integration For Android</h2>
<p>SDKBOX supports three different kinds of <strong>Android</strong> projects <strong>command-line</strong>, <strong>eclipse</strong> and <strong>Android Studio</strong>. </p>
<ul>
<li><code>proj.android</code> will be used as our <code>&lt;project_root&gt;</code> for <strong>command-line</strong> and <strong>eclipse</strong> project</li>
<li><code>proj.android-studio</code> will be used as our <code>&lt;project_root&gt;</code> for <strong>Android Studio</strong> project.</li>
</ul>
<h3 id="copy-files">Copy Files</h3>
<p>Copy the following <strong>jar</strong> files from <code>plugin/android/libs</code> folder of this
bundle into your project’s <strong><project_root>/libs</strong> folder.</p>
<blockquote>
<p>PluginSdkboxPlay.jar</p>
<p>sdkbox.jar</p>
</blockquote>
<ul>
<li>
<p>If you're using cocos2d-x from source copy the <strong>jar</strong> files to:</p>
<p>Android command-line:
<code>cocos2d/cocos/platform/android/java/libs</code></p>
<p>Android Studio:
<code>cocos2d/cocos/platform/android/libcocos2dx/libs</code></p>
</li>
<li>
<p>If you're using cocos2d-js or lua copy the <strong>jar</strong> files to:</p>
<p>Android command-line:
<code>frameworks/cocos2d-x/cocos/platform/android/java/libs</code></p>
<p>Android Studio:
<code>frameworks/cocos2d-x/cocos/platform/android/libcocos2dx/libs</code></p>
</li>
<li>
<p>If you're using prebuilt cocos2d-x copy the <strong>jar</strong> files to:</p>
<p>Android command-line:
<code>proj.android/libs</code></p>
</li>
</ul>
<p>Copy the <code>sdkboxplay_lib</code> directories from <code>plugin/android/libs</code> to your <code>&lt;project_root&gt;/libs/</code> directory.</p>
<h4 id="copy-jni-libs">Copy jni libs</h4>
<p>Copy and overwrite all the folders from <code>plugin/android/jni</code>
to your <code>&lt;project_root&gt;/jni/</code> directory.</p>
<blockquote>
<p>Note: sdkbox link with <code>gnustl</code> by default, if your project link with <code>c++static</code> please replace the files in <code>&lt;project_root&gt;/jni/&lt;plugin_name&gt;/libs</code> with files in <code>&lt;project_root&gt;/jni/&lt;plugin_name&gt;/libs_c++_static</code> folder</p>
</blockquote>
<h3 id="edit-androidmanifestxml">Edit <code>AndroidManifest.xml</code></h3>
<p>Include the following permissions above the <strong>application tag</strong>:</p>
<pre><code class="xml">&lt;uses-permission android:name=&quot;android.permission.GET_ACCOUNTS&quot; /&gt;
</code></pre>

<p>To enable <strong>hardware acceleration</strong> in your <strong>application tag</strong>. This tag is
optional on newer sdk versions and doesn't work on version 2.3.3.</p>
<pre><code class="xml">&lt;android:hardwareAccelerated=&quot;true&quot; /&gt;
</code></pre>

<h3 id="edit-androidmk">Edit <code>Android.mk</code></h3>
<p>Edit <code>proj.android/jni/Android.mk</code> to:</p>
<p>Add additional requirements to <strong>LOCAL_WHOLE_STATIC_LIBRARIES</strong>:</p>
<pre><code>LOCAL_WHOLE_STATIC_LIBRARIES += android_native_app_glue
LOCAL_LDLIBS += -landroid
LOCAL_LDLIBS += -llog
LOCAL_WHOLE_STATIC_LIBRARIES += PluginSdkboxPlay
LOCAL_WHOLE_STATIC_LIBRARIES += sdkbox 
</code></pre>

<p>Add a call to:</p>
<pre><code>$(call import-add-path,$(LOCAL_PATH))
</code></pre>

<p>before any <strong>import-module</strong> statements.</p>
<p>Add additional <strong>import-module</strong> statements at the end:</p>
<pre><code>$(call import-module, ./sdkbox)
$(call import-module, ./pluginsdkboxplay)
</code></pre>

<p>This means that your ordering should look similar to this:</p>
<pre><code>$(call import-add-path,$(LOCAL_PATH))
$(call import-module, ./sdkbox)
$(call import-module, ./pluginsdkboxplay)
</code></pre>

<h3 id="edit-aplicationmk">Edit <code>Aplication.mk</code></h3>
<p>Edit <code>proj.android/jni/Application.mk</code> to:</p>
<p>Add <strong>APP_PLATFORM</strong> version requirements:</p>
<pre><code>APP_PLATFORM := android-10
</code></pre>

<p>Copy all source and header files from <code>plugin/jsbindings/</code> to your projects <code>Classes</code> folder.</p>
<p>Add all <code>.cpp</code> files, that you just copied, to <code>Android.mk</code> in the <strong>LOCAL_SRC_FILES</strong> section. Example</p>
<pre><code>LOCAL_SRC_FILES := hellocpp/main.cpp \
                  ../../Classes/AppDelegate.cpp \
                  ../../Classes/HelloWorldScene.cpp \
                                    ../../Classes/NewSourceFile.cpp
</code></pre>

<h3 id="modify-cocos2dxactivityjava">Modify <strong>Cocos2dxActivity.java</strong></h3>
<ul>
<li>
<p>If you're using cocos2d-x from source, assuming you are in the <strong>proj.android</strong> directory, <strong>Cocos2dxActivity.java</strong> is located:</p>
<p><code>../../cocos2d-x/cocos/platform/android/java/src/org/cocos2dx/
lib/Cocos2dxActivity.java</code></p>
</li>
<li>
<p>If you're using the prebuilt cocos2d-x libraries assuming you are in the <code>proj.android</code> directory, <strong>Cocos2dxActivity.java</strong> is located:</p>
<p><code>./src/org/cocos2dx/lib/Cocos2dxActivity.java</code></p>
</li>
</ul>
<p><strong>Note:</strong> When using Cocos2d-x from source, different versions have <strong>Cocos2dxActivity.java</strong> in a different location. One way to find the location is to look in <strong>proj.android/project.properties</strong>. Example:
  <code>android.library.reference.1=../../cocos2d-x/cocos/platform/android/java</code></p>
<p>In this case, <strong>Cocos2dxActivity.java</strong> should be located at:</p>
<pre><code>../../cocos2d-x/cocos/platform/android/java/src/org/cocos2dx/lib/Cocos2dxActivity.java
</code></pre>

<ul>
<li>Modify <strong>Cocos2dxActivity.java</strong> to add the following imports:</li>
</ul>
<pre><code class="java">import android.content.Intent;
import com.sdkbox.plugin.SDKBox;
</code></pre>

<ul>
<li>Second, modify <strong>Cocos2dxActivity.java</strong> to edit the <code>onCreate(final Bundle savedInstanceState)</code> function to add a call to <code>SDKBox.init(this);</code>. The placement of this call is important. It must be done after the call to <code>onLoadNativeLibraries();</code>. Example:</li>
</ul>
<pre><code class="java">onLoadNativeLibraries();
SDKBox.init(this);
</code></pre>

<ul>
<li>
<p>Last, we need to insert the proper <strong>overrides</strong> code. There are a few rules here.</p>
<ul>
<li>
<p>If the method listed has not been defined, <strong>add it</strong>.</p>
</li>
<li>
<p>If the method listed has been defined, add the calls to <code>SDKBox</code> in the <strong>same</strong> existing function.</p>
</li>
</ul>
</li>
</ul>
<pre><code class="java">    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
          if(!SDKBox.onActivityResult(requestCode, resultCode, data)) {
            super.onActivityResult(requestCode, resultCode, data);
          }
    }
    @Override
    protected void onStart() {
          super.onStart();
          SDKBox.onStart();
    }
    @Override
    protected void onStop() {
          super.onStop();
          SDKBox.onStop();
    }
    @Override
    protected void onResume() {
          super.onResume();
          SDKBox.onResume();
    }
    @Override
    protected void onPause() {
          super.onPause();
          SDKBox.onPause();
    }
    @Override
    public void onBackPressed() {
          if(!SDKBox.onBackPressed()) {
            super.onBackPressed();
          }
    }
</code></pre>

<h2 id="proguard-optional">Proguard (optional)</h2>
<ul>
<li>Edit <code>project.properties</code>  to specify a <code>Proguard</code> configuration file. Example:</li>
</ul>
<pre><code>proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt
</code></pre>

<p>Use any Google Play proguard configuration that fitst your needs.
This is default proguard config:</p>
<pre><code>-keep class * extends java.util.ListResourceBundle {
    protected Object[][] getContents();
}

-keep public class com.google.android.gms.common.internal.safeparcel.SafeParcelable {
    public static final *** NULL;
}

-keepnames @com.google.android.gms.common.annotation.KeepName class *
-keepclassmembernames class * {
    @com.google.android.gms.common.annotation.KeepName *;
}

-keepnames class * implements android.os.Parcelable {
    public static final ** CREATOR;
}
</code></pre>

<p><strong>Note:</strong> Proguard only works with <strong>Release</strong> builds (i.e <code>cocos run -m release</code>) debug builds do not invoke Proguard rules.</p></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../../../js/jquery-1.10.2.min.js"></script>
        <script src="../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../js/highlight.pack.js"></script>
        <script>var base_url = '../../..';</script>
        <script src="../../../js/base.js"></script>

 
        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-70044300-2', 'auto');
            ga('send', 'pageview');
        </script>
        
    </body>
</html>
